{"version":3,"sources":["assets\\script\\comp\\wxRankList.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["let Consts = {\r\n\tOpenDataKeys: {\r\n\t\tInitKey: \"initKey\",\r\n\t\tGrade: \"testkey\",\r\n\t\tLevelKey: \"reachlevel\",\r\n\t\tScoreKey: \"levelScore\", // json.string\r\n\t},\r\n\tDomainAction: {\r\n\t\tFetchFriend: \"FetchFriend\",\r\n\t\tFetchGroup: \"FetchGroup\",\r\n\t\tFetchFriendLevel: \"FetchFriendLevel\", //好友关卡进度排行\r\n\t\tFetchFriendScore: \"FetchFriendScore\", //好友关卡得分排行\r\n\t\tHorConmpar: \"HorConmpar\", //横向比较 horizontal comparison\r\n\t\tPaging: \"Paging\",\r\n        Scrolling: \"Scrolling\",\r\n        SumbitScore: \"SumbitScore\",//提交分数\r\n\t\tShowRank: \"ShowRank\"//显示排名\r\n\t},\r\n}\r\n\r\n// 这个换成自己的逻辑\r\nlet utils = {\r\n    curLevel : 1,\r\n    getScore : _=>{return 1}\r\n}\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class wxRankList extends cc.Component {\r\n\r\n    static instance:wxRankList=null;\r\n\r\n    @property(cc.Sprite)\r\n    rankRender:cc.Sprite=null; // render spr\r\n    @property(cc.Node)\r\n    rankListNode:cc.Node=null;\r\n    @property(cc.Node)\r\n    horRankNode:cc.Node=null;\r\n\r\n    @property(cc.Node)\r\n    rankBgNode:cc.Node=null;\r\n\r\n    @property(cc.Label)\r\n    labelTitle:cc.Label=null;\r\n    @property(cc.Node)\r\n    touchLayer:cc.Node=null;\r\n\r\n    // @property(Boolean)\r\n    enableScroll = true;//\r\n\r\n    _timeCounter=0;\r\n    rendInterval=0.5;//刷新排行画布间隔s\r\n\r\n    rankTexture:cc.Texture2D=null;\r\n    rankSpriteFrame : cc.SpriteFrame=null;\r\n    closeBackRank=0; // 关闭后操作\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        wxRankList.instance=this;\r\n        \r\n        this._timeCounter = 0\r\n        this.rankTexture = new cc.Texture2D();\r\n        this.rankSpriteFrame = new cc.SpriteFrame();\r\n        this.resizeSharedCanvas(this.rankRender.node.width, this.rankRender.node.height)\r\n    }\r\n\r\n    // start() {\r\n    // }\r\n\r\n    update(dt) {\r\n        // this._timeCounter += dt\r\n        // if (this._timeCounter < this.rendInterval) return\r\n        // this._timeCounter = 0\r\n\r\n        this.updateRankList()\r\n    }\r\n\r\n    resizeSharedCanvas(width, height){\r\n        if(!window[\"wx\"]) return;\r\n        let sharedCanvas = window[\"wx\"].getOpenDataContext().canvas\r\n        sharedCanvas.width = width\r\n        sharedCanvas.height = height\r\n        console.log(sharedCanvas)\r\n    }\r\n\r\n    changeRender(renderNode:cc.Node){\r\n        if(renderNode.name === \"sprHorRank\"){\r\n            this.horRankNode.active = true;\r\n            this.rankListNode.active = false;\r\n            this.rankBgNode.active = false\r\n        }else if(renderNode.name === \"sprRankList\"){\r\n            this.horRankNode.active = false;\r\n            this.rankListNode.active = true;\r\n            this.rankBgNode.active = true\r\n        }\r\n        this.rankRender.node.width = renderNode.width\r\n        this.rankRender.node.height = renderNode.height\r\n        this.rankRender.node.position = renderNode.position\r\n        this.resizeSharedCanvas(renderNode.width, renderNode.height)\r\n    }\r\n\r\n    updateRankList() {\r\n        if(!window[\"wx\"]) return;\r\n        if(!this.rankTexture) return;\r\n        let sharedCanvas = window[\"wx\"].getOpenDataContext().canvas\r\n        this.rankTexture.initWithElement(sharedCanvas);\r\n        this.rankTexture.handleLoadedTexture();\r\n        this.rankSpriteFrame.setTexture(this.rankTexture);\r\n        this.rankRender.spriteFrame = this.rankSpriteFrame;\r\n    }\r\n\r\n    onEnable() {\r\n        this.touchLayer.active = true\r\n        if (this.enableScroll) {\r\n            this.rankRender.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n        }\r\n\r\n        // this.postMessage(Consts.DomainAction.FetchFriendLevel)\r\n    }\r\n\r\n    onDisable() {\r\n        if (this.enableScroll) {\r\n            this.rankRender.node.off(cc.Node.EventType.TOUCH_MOVE)\r\n        }\r\n    }\r\n\r\n    onViewDetailRank(){\r\n        this.closeBackRank = 1;\r\n        this.loadLevelScoreRank(utils.curLevel)\r\n    }\r\n\r\n    onPageUp() {\r\n        cc.log(this)\r\n        this.postMessage(\"Paging\", -1)\r\n    }\r\n\r\n    onPageDown() {\r\n        this.postMessage(\"Paging\", 1)\r\n    }\r\n\r\n    onClose() {\r\n        if(this.closeBackRank===1){\r\n            this.closeBackRank = 0;\r\n            this.loadHorRank(utils.curLevel)\r\n            return\r\n        }\r\n        this.node.active = false;\r\n        this.node.emit(Const.CLOSE);\r\n    }\r\n\r\n    onTouchMove(event) {\r\n        const deltaY = event.getDeltaY();\r\n        // console.log(\"rank touchmove:\", deltaY);\r\n        this.postMessage(\"Scrolling\", deltaY)\r\n    }\r\n\r\n    //获取关卡得分排行\r\n    loadLevelScoreRank(level){\r\n        this.labelTitle.string = `第${level}关排行`\r\n        this.node.active = true;\r\n        this.touchLayer.active = true\r\n        this.onEnable()\r\n        this.changeRender(this.rankListNode)        \r\n        this.postMessage(Consts.DomainAction.FetchFriendScore, level)\r\n    }\r\n\r\n    //获取关卡进度排行\r\n    loadLevelOpenRank(){\r\n        this.labelTitle.string = \"关卡排行\"\r\n        this.node.active = true;\r\n        this.touchLayer.active = true\r\n        this.onEnable()\r\n        this.changeRender(this.rankListNode)        \r\n        this.postMessage(Consts.DomainAction.FetchFriendLevel)\r\n    }\r\n\r\n    //横向比较\r\n    loadHorRank(level=1){\r\n        this.node.active = true;\r\n        this.touchLayer.active = false        \r\n        this.onDisable()\r\n        this.changeRender(this.horRankNode)\r\n        this.postMessage(Consts.DomainAction.HorConmpar, level, utils.getScore(level))\r\n    }\r\n    \r\n\r\n    //向子域发送消息\r\n    postMessage(action, data=null, dataEx=null) {\r\n        if(!window[\"wx\"]) return;\r\n        let openDataContext = window[\"wx\"].getOpenDataContext()\r\n        openDataContext.postMessage({\r\n            action: action,\r\n            data: data,\r\n            dataEx:dataEx,\r\n        })\r\n    }\r\n\r\n    // //检查得分\r\n    // checkScore(key, callback){\r\n    //     if (!window.wx) return\r\n    //     wx.getUserCloudStorage({\r\n    //         keyList:[key],\r\n    //         success:res=>{\r\n    //             res.data.\r\n    //         }\r\n    //     })\r\n    // }\r\n\tloadScoreRank(key,gameName){\r\n        this.labelTitle.string = gameName+`排行榜`\r\n        this.node.active = true;\r\n        this.touchLayer.active = true\r\n        this.onEnable()\r\n        this.changeRender(this.rankListNode)        \r\n        this.postMessage(Consts.DomainAction.FetchFriendScore, key);\r\n    }\r\n\r\n    //获取关卡得分排行\r\n    showRank(level,gameName,isMax=true){\r\n        this.labelTitle.string = gameName+`排行`\r\n        this.node.active = true;\r\n        this.touchLayer.active = true\r\n        this.onEnable()\r\n        this.changeRender(this.rankListNode)        \r\n        this.postMessage(Consts.DomainAction.ShowRank, {level:level,isMax:isMax})\r\n    }\r\n    //提交分数\r\n    sumbitScore(level,score,isMax=true) {\r\n        cc.log(level,score,isMax);\r\n        if(!window[\"wx\"]) return;\r\n        this.postMessage(Consts.DomainAction.SumbitScore, {level:level,score:score,isMax:isMax});\r\n    }\r\n    //wx api\r\n    // 上传关卡分数\r\n    uploadScore(level, score) {\r\n        if(!window[\"wx\"]) return;\r\n        score = score.toString()\r\n        window[\"wx\"].setUserCloudStorage({\r\n            KVDataList: [\r\n                { key: Consts.OpenDataKeys.ScoreKey+level, value: score },\r\n            ],\r\n            success: (res) => {\r\n                console.log(\"uploadScore success:res=>\", res)\r\n            },\r\n            fail: (res) => {\r\n                console.log(\"uploadScore fail:res=>\", res)\r\n            }\r\n        })\r\n    }\r\n\r\n    // 上传关卡开启进度\r\n    uploadLevelOpen(level){\r\n        if (!window.window[\"wx\"]) return\r\n        level = level.toString()\r\n        window[\"wx\"].setUserCloudStorage({\r\n            KVDataList: [\r\n                { key: Consts.OpenDataKeys.LevelKey, value: level },\r\n            ],\r\n            success: (res) => {\r\n                console.log(\"uploadScore success:res=>\", res)\r\n            },\r\n            fail: (res) => {\r\n                console.log(\"uploadScore fail:res=>\", res)\r\n            }\r\n        })\r\n    }\r\n\r\n    //删除微信数据\r\n    removeUserKey(key_or_keys) {\r\n        if (!window.window[\"wx\"]) return\r\n        if(typeof(key_or_keys)===\"string\"){\r\n            key_or_keys = [key_or_keys]\r\n        }\r\n        window[\"wx\"].removeUserCloudStorage({\r\n            keyList: key_or_keys,\r\n            success: (res) => {\r\n                console.log(\"uploadScore success:res=>\", res)\r\n            },\r\n            fail: (res) => {\r\n                console.log(\"uploadScore fail:res=>\", res)\r\n            }\r\n        })\r\n    }\r\n\r\n    // 分享\r\n    /* args:{\r\n                title: string\r\n                imageUrl: string\r\n                query: string\r\n                success: func\r\n                fail: func\r\n            }\r\n    */\r\n    share(args) {\r\n        if (!window.window[\"wx\"]) return\r\n        if(!args) args={}\r\n        args.imageUrl = args.imageUrl || \"http://img.zcool.cn/community/01c2ac57beb18d0000012e7eaa6d19.jpg@1280w_1l_2o_100sh.jpg\"\r\n        window[\"wx\"].shareAppMessage({\r\n            title: \"好多砖块啊，快来一起打\",\r\n            // imageUrl: \"res/raw-assets/res/shengming.25929.png\",\r\n            imageUrl: args.imageUrl,\r\n            query: \"key=testshare\",\r\n            success: (res) => {\r\n                console.log(\"success:\", res)\r\n                if(args.success){\r\n                    args.success(res)\r\n                }\r\n            },\r\n            fail: res => {\r\n                console.log(\"fail:\", res)\r\n                if(args.fail){\r\n                    args.fail(res)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    initRank() {\r\n    }\r\n\r\n    snapshotSync(){\r\n        if(!window['wx']) return\r\n        var canvas = cc.game.canvas;\r\n        var width  = cc.winSize.width;\r\n        var height  = cc.winSize.height;\r\n\r\n        return canvas['toTempFilePathSync']({\r\n            x: 0,\r\n            y: 0,\r\n            width: width*1.5,\r\n            height: height,\r\n            destWidth: width*1.5,\r\n            destHeight: height\r\n        })\r\n    }\r\n\r\n}\r\n"]}